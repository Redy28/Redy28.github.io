# 접근 통제 모델

##### 접근 통제

![2022-10-21-01접근통제](C:\Users\home\Desktop\github\깃허브 이미지\2022-10-21-접근통제\2022-10-21-01접근통제.jpg)

<br>

##### 임의적 접근 통제

![2022-10-21-02접근통제](C:\Users\home\Desktop\github\깃허브 이미지\2022-10-21-접근통제\2022-10-21-02접근통제.jpg)

<br>

##### 소유권, 퍼미션 개념

centOS_6에 root사용자  mobaxterm에 test03을 띄워놓고 시작 하겠습니다.

![2022-10-21-07](../images/2022-10-21-접근 통제 모델/2022-10-21-07.jpg)

<br>

디렉터리 생성 후 소유권(소유자 : 소유그룹) test03 로 변경

![2022-10-21-04소유권](C:\Users\home\Desktop\github\깃허브 이미지\2022-10-21-접근통제\2022-10-21-04소유권.jpg)

<br>

test02 -> 파일 2개 만들기

![2022-10-21-05파일](C:\Users\home\Desktop\github\깃허브 이미지\2022-10-21-접근통제\2022-10-21-05파일.jpg)

<br>

test04 사용자에게 소유권을 넘겨주면서 퍼미션을 읽기만 가능 하게 할수 있는지 확인

root -> test04에 소유권 부여

![2022-10-21-06소유권](C:\Users\home\Desktop\github\깃허브 이미지\2022-10-21-접근통제\2022-10-21-06소유권.jpg)

<br>

test0x_file 소유권 확인

![2022-10-21-08소유권](../images/2022-10-21-접근 통제 모델/2022-10-21-08소유권.jpg)

test03에서 파일을 만들었지만 root에서 파일에 대한 소유권을 test04로 변경했기 때문에 퍼미션 변경이 안되고 있습니다.

<br>

<br>

<br>

##### 공유폴더를 이용한 신분기반 접근 제어 정책 테스트

window 2003을 이용 해서 해보겠습니다.

공유폴더 2개 생성

 ![2022-10-21-09공유폴더](../images/2022-10-21-접근 통제 모델/2022-10-21-09공유폴더.jpg)

<br>

lusrmgr.msc

![2022-10-21-11사용자](../images/2022-10-21-접근 통제 모델/2022-10-21-11사용자.jpg)

사용자 2개와 그룹 1개를 추가해 줍니다.

<br>

개인 기반 접근 정책(IBP, Individual-Based Policy) 변경

![2022-10-21-12사용자](../images/2022-10-21-접근 통제 모델/2022-10-21-12사용자.jpg)

dactest_user 파일에 사용 권한을 사진처럼 변경해 주시면 됩니다.

<br>

xp로 접속해서 dac01 , dac02 차이 확인해 보기

![2022-10-21-14확인](../images/2022-10-21-접근 통제 모델/2022-10-21-14확인.jpg)

<br>

dacgroup에 dac01 추가

![2022-10-21-15그룹jpg](../images/2022-10-21-접근 통제 모델/2022-10-21-15그룹jpg.jpg)

<br>

그룹 기반 접근 정책(GBP, Group-Based Policy)

![2022-10-21-16그룹원jpg](../images/2022-10-21-접근 통제 모델/2022-10-21-16그룹원jpg.jpg)

dactest_group 파일의 사용권한을 변경해 주시면 됩니다.

<br>

xp로 접속해서 dac01 , dac02 차이 확인해 보기

![2022-10-21-17확인jpg](../images/2022-10-21-접근 통제 모델/2022-10-21-17확인jpg.jpg)

<br>

##### 강제적 접근 통제

![2022-10-21-18강제적jpg](../images/2022-10-21-접근 통제 모델/2022-10-21-18강제적jpg.jpg)

<br>

벨라파 듈라 모델

![2022-10-21-19벨라파둘라](../images/2022-10-21-접근 통제 모델/2022-10-21-19벨라파둘라.jpg)

<br>

비바 모델

![2022-10-21-20비바](../images/2022-10-21-접근 통제 모델/2022-10-21-20비바.jpg)

<br>

<br>

<br>

##### SELINUX

![2022-10-21-21셀리눅스](../images/2022-10-21-접근 통제 모델/2022-10-21-21셀리눅스.jpg)

<br>

특징

![2022-10-21-22특징](../images/2022-10-21-접근 통제 모델/2022-10-21-22특징.jpg)

<br>

SELINUX

![2022-10-21-23셀리눅스](../images/2022-10-21-접근 통제 모델/2022-10-21-23셀리눅스.jpg)

SELINUX를 활성해 해보겠습니다.

```
vim /etc/sysconfig/selinux

# This file controls the state of SELinux on the system.
# SELINUX= can take one of these three values:
#     enforcing - SELinux security policy is enforced.
#     permissive - SELinux prints warnings instead of enforcing.
#     disabled - No SELinux policy is loaded.
# SELINUX=disabled       << 주석 처리
SELINUX=enforcing        << 내용 추가
# SELINUXTYPE= can take one of these two values:
#     targeted - Targeted processes are protected,
#     mls - Multi Level Security protection.
SELINUXTYPE=targeted

내용 추가하고 나서 재부팅
```

<br>

SELINUX 활성화 확인

![2022-10-21-24활성화](../images/2022-10-21-접근 통제 모델/2022-10-21-24활성화.jpg)

<br>

변경 시 꼭 재시작 안하더라도 임시로 변경은 가능

![2022-10-21-25활성화](../images/2022-10-21-접근 통제 모델/2022-10-21-25활성화.jpg)

변경은 가능하나 재시작후 기본값으로 돌아옵니다.

<br>

SELINUX 관련 패키지 설치

![2022-10-21-26셀리눅스설치](../images/2022-10-21-접근 통제 모델/2022-10-21-26셀리눅스설치.jpg)

![2022-10-21-28패키지](../images/2022-10-21-접근 통제 모델/2022-10-21-28패키지.jpg)

```
yum -y install policycoreutils-python 
yum -y install setools-console         패키지 2개 설치
```

<br>

디렉터리, 파일 생성

![2022-10-21-27생성](../images/2022-10-21-접근 통제 모델/2022-10-21-27생성.jpg)

<br>

httpd 확인

![2022-10-21-29httpd](../images/2022-10-21-접근 통제 모델/2022-10-21-29httpd.jpg)

httpd가 설치되어 있는지 확인하고 설치가 되어있지 않으면 yum -y install httpd 하셔서 설치 해주시면 됩니다.

<br>

 Security Context 형식

![2022-10-21-30문법jpg](../images/2022-10-21-접근 통제 모델/2022-10-21-30문법jpg.jpg)

![2022-10-21-31확인](../images/2022-10-21-접근 통제 모델/2022-10-21-31확인.jpg)

<br>

사용자(user)

![2022-10-21-32사용자](../images/2022-10-21-접근 통제 모델/2022-10-21-32사용자.jpg)

```
[root@localhost selinuxtest]# seinfo -u

Users: 9
   sysadm_u
   system_u
   xguest_u
   root
   guest_u
   staff_u
   user_u
   unconfined_u
   git_shell_u

시스템 계정과  SELinux 사용자가 어떻게 연결되어 있는지 조회 
[root@localhost selinuxtest]# semanage login -l

로그인 이름                    SELinux 사용자               MLS/MCS 범위

__default__               unconfined_u              s0-s0:c0.c1023
root                      unconfined_u              s0-s0:c0.c1023
system_u                  system_u                  s0-s0:c0.c1023
```

<br>

역할(Role)

![2022-10-21-33역할](../images/2022-10-21-접근 통제 모델/2022-10-21-33역할.jpg)

```
[root@localhost selinuxtest]# seinfo -r

Roles: 12
   guest_r
   staff_r
   user_r
   git_shell_r
   logadm_r
   object_r
   sysadm_r
   system_r
   webadm_r
   xguest_r
   nx_server_r
   unconfined_r
   
각 SELINUX user 에 연결된 role 조회
[root@localhost selinuxtest]# seinfo -uunconfined_u -x
   unconfined_u
      default level: s0
      range: s0 - s0:c0.c1023
      roles:
         object_r
         system_r
         unconfined_r
```

<br>

 유형(Type or Domain)

![2022-10-21-34유형](../images/2022-10-21-접근 통제 모델/2022-10-21-34유형.jpg)



<br>