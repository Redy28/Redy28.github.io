# DiskQuota(디스크 할당량)

<br>

#### NT(window)

<br>

##### 사용자에 대한 디스크 할당량

diskmgmt.msc

![2022-09-14-01disk](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-01disk.PNG)

<br>

disk 관리

![2022-09-14-02disk](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-02disk.PNG)

<br>

볼륨 축소

![2022-09-14-03볼륨축소](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-03볼륨축소.PNG)

c드라이브 우클릭해서 볼륨 축소 클릭

<br>

볼륨 축소

![2022-09-14-04볼륨축소](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-04볼륨축소.PNG)

축소할 공간 입력

<br>

볼륨 축소

![2022-09-14-05볼륨축소](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-05볼륨축소.PNG)

할당되지 않은 disk 생성완료

<br>

새 단순 볼륨 만들기

![2022-09-14-06새단순볼륨](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-06새단순볼륨.PNG)

생성된 disk 우클릭

<br>

새 단순 볼륨 만들기

![2022-09-14-07새단순볼륨](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-07새단순볼륨.PNG)

계속 다음 눌러 주시면 생성 완료 됩니다.

<br>

디스크 사용 제한

![2022-09-14-08제한](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-08제한-1663140747248-13.PNG)

내컴퓨터 -> e드라이브 우클릭 -> 할당량 들어가서 설정 해주시면 됩니다.

<br>

파일 만들기

![2022-09-14-09파일만들기](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-09파일만들기.PNG)

e드라이브에서 빈파일 하나 만들기

<br>

공유 폴더로 만들기

![2022-09-14-10공유](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-10공유.PNG)

![2022-09-14-11고급공유](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-11고급공유.PNG)

![2022-09-14-12권한](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-12권한.PNG)

폴더 우클릭 -> 공유 -> 고급공유 -> 권한 들어가서 권한 수정해주시고 적용 확인 눌러주시면 됩니다.

<br>

확인 해보기

![2022-09-14-16공유폴더접속](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-16공유폴더접속.PNG)

disk 용량 제한 성공

<br>

<br>

<br>

##### 폴더 / 디렉터리 사용에 대한 할당량

기존 설정 해제

![2022-09-14-17할당량해제](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-17할당량해제.PNG)

<br>

FSRM(파일서버리소스관리자) 을 설치

![2022-09-14-18설치](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-18설치.PNG)

![2022-09-14-19설치](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-19설치.PNG)

![2022-09-14-20설치](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-20설치.PNG)

![2022-09-14-21설치](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-21설치.PNG)

관리도구 > 서버관리자 > 관리 > 역할 및 기능 추가 > 역할 기반 또는 기능 기반 설치 > 서버 풀에서 서버 선택 > 파일 및 저장소 서비스 > 파일 서버 리소스 관리자 체크 > 기능추가 >다음 > 다음 > 필요한 경우 자동으로 대상 서버 다시시작 체크 예 > 설치

<br>

설치 확인

![2022-09-14-22설치확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-22설치확인.PNG)

<br>

할당량 만들기

![2022-09-14-23할당량만들기](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-23할당량만들기.PNG)

<br>

공간 제한 설정

![2022-09-14-24공간제한](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-24공간제한.PNG)

<br>

이벤트 알림 설정

![2022-09-14-24알림](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-24알림.PNG)

<br>

이벤트 로그 설정

![2022-09-14-25이벤트로그](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-25이벤트로그.PNG)

<br>

만들기

![2022-09-14-26만들기](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-26만들기.PNG)

![2022-09-14-27사용자지정](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-27사용자지정.PNG)

<br>

설정한 파일 확인

![2022-09-14-28확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-28확인.PNG)

<br>

공간 제한 확인 해보기

![2022-09-14-29확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-29확인.PNG)

<br>

이벤트 로그, 알림 확인

![2022-09-14-30이벤트](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-30이벤트.PNG)

![2022-09-14-31이벤트](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-31이벤트.PNG)

<br>

<br>

<br>

##### 폴더 / 디렉터리에 파일 업로드에 대한 제한

test 폴더 생성

![2022-09-14-32폴더생성](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-32폴더생성.PNG)

<br>

폴더 / 디렉터리 설정

![2022-09-14-33파일차단](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-33파일차단.PNG)

![2022-09-14-33적극적차단](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-33적극적차단-1663143514624-35.PNG)

![2022-09-14-34파일차단](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-34파일차단.PNG)

![2022-09-14-35파일차단](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-35파일차단.PNG)

![2022-09-14-36이벤트로그](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-36이벤트로그.PNG)

![2022-09-14-37만들기](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-37만들기.PNG)

<br>

폴더 / 디렉터리 확인

![2022-09-14-38생성완료](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-38생성완료.PNG)

<br>

폴더 공유

![2022-09-14-39폴더공유](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-39폴더공유.PNG)

<br>

폴더 및 검색 옵션 설정

![2022-09-14-40폴더공유옵션](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-40폴더공유옵션.PNG)

![2022-09-14-41체크해제](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-41체크해제.PNG)

체크해제

<br>

test 파일 준비

![2022-09-14-42파일준비](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-42파일준비.PNG)

<br>

공유 폴더에 파일 업로드

![2022-09-14-43확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-43확인.PNG)

a.txt는 업로드 되나 다른 파일들은 업로드가 불가

<br>

이벤트 로그 확인

![2022-09-14-44이벤트로그](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-44이벤트로그.PNG)

<br>

<br>

<br>

##### 디스크 할당량 관련 보고서 출력

파일 차단 감사 설정

![2022-09-14-45파일차단체크](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-45파일차단체크.PNG)

<br>

보고서 생성하기

![2022-09-14-46보고서만들기](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-46보고서만들기.PNG)

![2022-09-14-47체크](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-47체크.PNG)

 소유자별 파일 보고서 , 파일 그룹별 파일 보고서 , 파일 차단 감사 보고서 , 할당량 사용 현황 보고서 체크

![2022-09-14-49범위설정](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-49범위설정.PNG)

<br>

보고서 생성

![2022-09-14-50보고서생성](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-50보고서생성.PNG)

![2022-09-14-51보고서생성확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-51보고서생성확인.PNG)

<br>

파일 확인

![2022-09-14-52파일확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-52파일확인.PNG)

<br>

<br>

<br>

### Linux

##### user quota

VM Ware disk추가

![2022-09-14-53디스크추가](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-53디스크추가.PNG)

<br>

Linux 패키지 설치 확인

![2022-09-14-54패키지설치확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-54패키지설치확인.PNG)

<br>

파티션 생성

![2022-09-14-55파티션생성](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-55파티션생성.PNG)

<br>

파티션 생성 확인

![2022-09-14-56파티션생성확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-56파티션생성확인.PNG)

/dev/sdb1 생성된 모습 확인 하시면 됩니다.

<br>

mkfs

![2022-09-14-57mkfs](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-57mkfs.PNG)

<br>

mount

![2022-09-14-58디렉터리만들고설정](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-58디렉터리만들고설정.PNG)

디렉터리 만들고 mount 설정할 파일 들어가기

<br>

mount

![2022-09-14-59마운트](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-59마운트.PNG)

맨 밑줄 추가 후 재부팅

<br>

재부팅 후 mount 확인

![2022-09-14-60재부팅후확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-60재부팅후확인.PNG)

![2022-09-14-61재부팅후확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-61재부팅후확인.PNG)

<br>

quota 를 관리 하는 DB 파일을 생성후 확인

![2022-09-14-62체크](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-62체크.PNG)

<br>

파일 생성, 확인

![2022-09-14-63파일생성확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-63파일생성확인.PNG)

![2022-09-14-64확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-64확인.PNG)

<br>

실습용 사용자 생성

![2022-09-14-65사용자생성](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-65사용자생성.PNG)

<br>

quota setting 

![2022-09-14-67쿼타셋팅](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-67쿼타셋팅.PNG)

![2022-09-14-66쿼타셋팅](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-66쿼타셋팅.PNG)

\- block : 현재 사용하는 블록의 갯수 (kbyte) - inodes : 현재 사용자가 사용하는 inode 갯수 - soft , hard  : 유예기간이 있는가 없는가 ? (soft 는 유예기간 O), hard 는 유예기간 X)

<br>

퍼미션 확인

![2022-09-14-68퍼미션확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-68퍼미션확인.PNG)

쓰기 퍼미션이 부여되어 있지 않아서 쓰기 퍼미션을 부여 하겠습니다.

<br>

퍼미션 부여

![2022-09-14-69퍼미션확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-69퍼미션확인.PNG)

<br>

/data 디렉터리 설정 후 quota 시작

![2022-09-14-70쿼타실행](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-70쿼타실행.PNG)

<br>

/data 디렉터리에 파일 만들어 보기

![2022-09-14-71확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-71확인.PNG)

6번째 파일을 생성할 때 경고 메시지가 나오는 것이 확인 됩니다.

![2022-09-14-73확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-73확인.PNG)

7번째 파일을 생성할 때는 불가능 하다는 메시지가 나옵니다.

<br>

user02와 비교

![2022-09-14-72확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-72확인.PNG)

user02는 아직 quota설정을 해놓지 않아서 경고 메시지 없이 계속해서 파일을 생성 할 수 있습니다.

<br>

quota 정보 점검

![2022-09-14-74쿼타정보확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-74쿼타정보확인.PNG)

여기서 grace는 유예기간을 뜻 합니다.

<br>

<br>

<br>

##### group quota

그룹 생성

![2022-09-14-75그룹생성](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-75그룹생성.PNG)

<br>

유저 생성

![2022-09-14-76유저생성](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-76유저생성.PNG)

먼저 만들었던 그룹안에 user03을 만들어 줍니다.

<br>

quota setting 

![2022-09-14-78쿼타설정](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-78쿼타설정.PNG)

![2022-09-14-77쿼타설정](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-77쿼타설정.PNG)

<br>

파일 만들어 보기

![2022-09-14-79쿼타확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-79쿼타확인.PNG)

이번에도 6번째에 경고 메시지 7번째는 생성 불가입니다.

<br>

quota 정보 점검

![2022-09-14-80쿼타정보확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-80쿼타정보확인.PNG)

<br>

<br>

<br>

##### grace day

![2022-09-14-81edquota](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-81edquota.PNG)

![2022-09-14-82edquota](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-82edquota.PNG)

사용자 유예기간 , 그룹 유예기간 부분 수정도 가능함

<br>

quota setting 

![2022-09-14-84quota설정](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-84quota설정.PNG)

![2022-09-14-85quota설정](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-85quota설정.PNG)

<br>

파일 만들어 보기

![2022-09-14-86파일생성](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-86파일생성.PNG)

이번엔 4번째 까지만 만들어 놓고 멈추겠습니다.

<br>

현재 시간

![2022-09-14-83현재시간](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-83현재시간.PNG)

이번엔 시간을 변경해서 grace day를 확인해 보겠습니다.

<br>

시간 변경

![2022-09-14-87시간변경](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-87시간변경.PNG)

<br>

파일 만들어 보기

![2022-09-14-89파일생성](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-89파일생성.PNG)

5번째 파일이 만들어지지 않은 이유는 grace day가 초과 되었기 때문 입니다. 기존에 설정 되있던 grace day는 7일이지만 지금 10일 후로 날짜를 변경하였기 때문에 유예기간이 지나 파일이 생성되지 않는 모습입니다.

<br>

grace day 확인

![2022-09-14-90greace확인](../images/2022-09-14-DiskQuota(디스크 할당량)/2022-09-14-90greace확인.PNG)

grace day를 확인 해보면 none로 확인이 되는데 이는 기간이 지났음을 뜻 합니다.

<br>

