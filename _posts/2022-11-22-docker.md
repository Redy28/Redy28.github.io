# docker

- APPLICATION 실행에 필요한 환경을 하나의 image 로 생성
  - 이미지를 이용하여 다양한 환경에서 실행
  - Docker 만 설치할수 있으면 어떤 OS 환경에서도 동일한 환경의 어플리케이션을 실행 가능

<br>

docker 실행 환경 확인

![2022-11-22-02시스템인포](../images/2022-11-22-docker/2022-11-22-02시스템인포.jpg)

<br>

docker의 저장소 사용 확인

![2022-11-22-03시스템df](../images/2022-11-22-docker/2022-11-22-03시스템df.jpg)

<br>

<br>

<br>

##### docker : container

docker 실행 해보기

![2022-11-22-01헬로월드](../images/2022-11-22-docker/2022-11-22-01헬로월드.jpg)

<br>

docker  image pull(가져오기)

![2022-11-22-04다운](../images/2022-11-22-docker/2022-11-22-04다운.jpg)

<br>

image pull(가져오기) 후 목록 확인

![2022-11-22-05이미지확인](../images/2022-11-22-docker/2022-11-22-05이미지확인.jpg)

<br>

pull 한 docker image 을 기반으로 container 를 run(실행)

![2022-11-22-06실행](../images/2022-11-22-docker/2022-11-22-06실행.jpg)

<br>

웹브라우저에서 컨테이너의 run(실행) 여부 확인 (ubuntu 20.04)

![2022-11-22-07확인](../images/2022-11-22-docker/2022-11-22-07확인.jpg)

![2022-11-22-08확인](../images/2022-11-22-docker/2022-11-22-08확인.jpg)

<br>

남아있는 container 목록 확인

![2022-11-22-09status](../images/2022-11-22-docker/2022-11-22-09status.jpg)

<br>

container 중지

![2022-11-22-10삭제](../images/2022-11-22-docker/2022-11-22-10삭제.jpg)

<br>

container 재시작

![2022-11-22-11재시작](../images/2022-11-22-docker/2022-11-22-11재시작.jpg)

<br>

container ID 사용해서 정지

![2022-11-22-12중지](../images/2022-11-22-docker/2022-11-22-12중지.jpg)

<br>

container 삭제

![2022-11-22-13삭제](../images/2022-11-22-docker/2022-11-22-13삭제.jpg)

<br>

image 검색

![2022-11-22-14검색](../images/2022-11-22-docker/2022-11-22-14검색.jpg)

<br>

centos7 image 설치

![2022-11-22-15설치](../images/2022-11-22-docker/2022-11-22-15설치.jpg)

<br>

nginx 다시 설치

![2022-11-22-16설치](../images/2022-11-22-docker/2022-11-22-16설치.jpg)

<br>

image run

![2022-11-22-19변경](../images/2022-11-22-docker/2022-11-22-19변경.jpg)

<br>

확인

![2022-11-22-20확인](../images/2022-11-22-docker/2022-11-22-20확인.jpg)

<br>

하나의 image로 2개의 container 생성

![2022-11-22-21생성](../images/2022-11-22-docker/2022-11-22-21생성.jpg)

<br>

image 삭제

![2022-11-22-23삭제](../images/2022-11-22-docker/2022-11-22-23삭제.jpg)

<br>

image 모두 삭제

![2022-11-22-24삭제](../images/2022-11-22-docker/2022-11-22-24삭제.jpg)

<br>

container rename

![2022-11-22-25이름변경](../images/2022-11-22-docker/2022-11-22-25이름변경.jpg)

<br>

사용하지 않는 container 를 prune(제거)

![2022-11-22-26삭제](../images/2022-11-22-docker/2022-11-22-26삭제.jpg)

stop되어 있는 모든 container 삭제

<br>

가동중인 container 에 attach(접근)하여 파일을 cp(복사)

![2022-11-22-27도커](../images/2022-11-22-docker/2022-11-22-27도커.jpg)

![2022-11-22-28복사](../images/2022-11-22-docker/2022-11-22-28복사.jpg)

<br>

 docker 를 이용한 mariadb 설치

![2022-11-22-29디비설치](../images/2022-11-22-docker/2022-11-22-29디비설치.jpg)

![2022-11-22-30디비설치](../images/2022-11-22-docker/2022-11-22-30디비설치.jpg)

<br>

<br>

<br>

##### docker : image build

 nginx 의 container 의 html 파일을 추가하여 새로운 image 로 저장 

![2022-11-22-31엔진x](../images/2022-11-22-docker/2022-11-22-31엔진x.jpg)

<br>

![2022-11-22-32엔진x](../images/2022-11-22-docker/2022-11-22-32엔진x.jpg)

<br>

![2022-11-22-33엔진x](../images/2022-11-22-docker/2022-11-22-33엔진x.jpg)

<br>

![2022-11-22-34엔진x](../images/2022-11-22-docker/2022-11-22-34엔진x.jpg)

<br>

![2022-11-22-35엔진x](../images/2022-11-22-docker/2022-11-22-35엔진x.jpg)

<br>

새로 생성된 image 를 reference 하여 새로운 컨테이너를 생성

![2022-11-22-37컨테이너](../images/2022-11-22-docker/2022-11-22-37컨테이너.jpg)

**기존 컨테이너 종료후 새롭게 만들어진 이미지로 컨테이너를 생성하셔야 합니다.**

<br>

새로 생성된 이미지로 컨테이너 생성시 포트번호 다르게 

![2022-11-22-38중복](../images/2022-11-22-docker/2022-11-22-38중복.jpg)

<br>

image backup

![2022-11-22-39백업](../images/2022-11-22-docker/2022-11-22-39백업.jpg)

<br>

<br>

<br>

##### docker : image upload

[hub.docker.com](http://hub.docker.com/) 로그인 -> Repositories -> Create

![2022-11-22-43이미지푸쉬](../images/2022-11-22-docker/2022-11-22-43이미지푸쉬.jpg)

<br>

![2022-11-22-40이미지푸쉬](../images/2022-11-22-docker/2022-11-22-40이미지푸쉬.jpg)

<br>

![2022-11-22-41이미지푸쉬](../images/2022-11-22-docker/2022-11-22-41이미지푸쉬.jpg)

<br>

![2022-11-22-42이미지푸쉬](../images/2022-11-22-docker/2022-11-22-42이미지푸쉬.jpg)

<br>

![2022-11-22-44확인](../images/2022-11-22-docker/2022-11-22-44확인.jpg)

<br>

<br>

<br>

##### docker : build with Dockerfile

디렉터리, 파일 만들기

![2022-11-22-45디렉터리파일](../images/2022-11-22-docker/2022-11-22-45디렉터리파일.jpg)

<br>

image build 를 위한 Dockerfile 편집

```
$ sudo vim /home/test01/sample/Dockerfile

FROM centos:latest
```

<br>

작성된 Dockerfile 을 기반으로 image 를 build

![2022-11-22-46빌드](../images/2022-11-22-docker/2022-11-22-46빌드.jpg)

<br>

원본이미지와 사본이미지를 비교

![2022-11-22-47비교](../images/2022-11-22-docker/2022-11-22-47비교.jpg)

이름만 다르고 모든게 똑같다.

<br>

이름이 다른 도커파일 생성

![2022-11-22-48도커](../images/2022-11-22-docker/2022-11-22-48도커.jpg)

<br>

별도 파일명으로 build

![2022-11-22-49빌드](../images/2022-11-22-docker/2022-11-22-49빌드.jpg)

<br>

