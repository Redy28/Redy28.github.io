# SSH

간단하게 SSH에 대해 알아보는 실습을 해보겠습니다.



### 목적지 port 바꾸기

우선 centOS6를 Client로 XP를 Server로 활용하면서 사용해 보겠습니다.

SSH의 기본 port번호는 22번 입니다.

그럼 SSH의 port번호를 바꾸면 제대로 실행이 되는지 한번 알아 보겠습니다.



우선 SSH의 정보가 담긴 파일은 `/etc/ssh`에 있습니다.



port번호 정보가 담긴 파일에 접근 합니다.

![2022-07-12-02포트번호변경](../images/2022-07-12-SSH/2022-07-12-02포트번호변경.PNG)



port번호를 22000으로 바꿔 보겠습니다.

![2022-07-12-01포트번호변경](../images/2022-07-12-SSH/2022-07-12-01포트번호변경.PNG)

port번호 변경사항을 재적용 시킵니다.



![2022-07-12-03포트번호변경](../images/2022-07-12-SSH/2022-07-12-03포트번호변경.PNG)



이제 Server에 가서 확인해 보겠습니다.

![2022-07-12-04포트번호변경후 XP에서접속해보기](../images/2022-07-12-SSH/2022-07-12-04포트번호변경후 XP에서접속해보기.PNG)

![2022-07-12-05포트번호변경후 XP에서접속해보기성공](../images/2022-07-12-SSH/2022-07-12-05포트번호변경후 XP에서접속해보기성공.PNG)

port번호를 바꿔도 그 바꾼 번호를 통해 접속한다면 문제없이 접속이 가능하다는 것을 알 수 있습니다.



### root 로그인을 차단

다음은 root 사용자를 차단하고 접속이 되는지 확인해 보겠습니다.



root 사용자를 차단하고 재적용 합니다.

![2022-07-12-02포트번호변경](../images/2022-07-12-SSH/2022-07-12-02포트번호변경-16576128628517.PNG)

![2022-07-12-06루트사용자차단하기](../images/2022-07-12-SSH/2022-07-12-06루트사용자차단하기.PNG)



![2022-07-12-06루트사용자차단하고 재적용](../images/2022-07-12-SSH/2022-07-12-06루트사용자차단하고 재적용.PNG)



Server로 가서 확인해 보겠습니다.

![2022-07-12-06루트사용자차단하기xp에서확인root로그인불가](../images/2022-07-12-SSH/2022-07-12-06루트사용자차단하기xp에서확인root로그인불가.PNG)

![2022-07-12-06루트사용자차단하기xp에서확인ktest로그인성공](../images/2022-07-12-SSH/2022-07-12-06루트사용자차단하기xp에서확인ktest로그인성공.PNG)

root 사용자는 로그인이 안되지만 다른 사용자는 로그인이 되는것을 확인해 볼 수 있습니다.







### SSH 버전 변경 테스트

SSHv2에서 SSHv1로 바꿔서 실행해 보겠습니다.

![2022-07-12-02포트번호변경](../images/2022-07-12-SSH/2022-07-12-02포트번호변경-165761363451412.PNG)

![2022-07-12-07-프로토콜변경](../images/2022-07-12-SSH/2022-07-12-07-프로토콜변경.PNG)

![2022-07-12-07-프로토콜변경후 재적용](../images/2022-07-12-SSH/2022-07-12-07-프로토콜변경후 재적용.PNG)





Server로 가서 확인해 보겠습니다.

SSH버전을 1로 바꾸고 접속 하겠습니다.

![2022-07-12-08-서버에서 확인하기1](../images/2022-07-12-SSH/2022-07-12-08-서버에서 확인하기1.PNG)

![2022-07-12-09-서버에서 확인하기2](../images/2022-07-12-SSH/2022-07-12-09-서버에서 확인하기2.PNG)

접속에 성공 했습니다. SSH 버전2로도 한번 접속 해보겠습니다.

![2022-07-12-10-서버에서 확인하기3](../images/2022-07-12-SSH/2022-07-12-10-서버에서 확인하기3.PNG)

![2022-07-12-11-서버에서 확인하기4](../images/2022-07-12-SSH/2022-07-12-11-서버에서 확인하기4.PNG)

접속에 실패 했습니다. 

SSH는 다른 버전으로는  접속이 되지 않는다를 알 수 있습니다.

